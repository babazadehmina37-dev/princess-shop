<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ุชุณูู ุญุณุงุจ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="navbar">
  <h1>๐๏ธ ูพุฑูุณุณ ุดุงูพ</h1>
  <nav>
    <ul>
      <li><a href="index.html">ุฎุงูู</a></li>
      <li><a href="products.html">ูุญุตููุงุช</a></li>
    </ul>
  </nav>
  <div class="cart">๐ <span id="cart-count">0</span></div>
</header>

<section class="checkout-form">
  <h2>ุชุณูู ุญุณุงุจ</h2>
  <form id="checkoutForm">
    <label>ุขุฏุฑุณ ุตูุฑุชุญุณุงุจ:</label>
    <textarea id="billAddress" required></textarea>

    <label>ุขุฏุฑุณ ุชุญูู:</label>
    <textarea id="shipAddress" required></textarea>

    <h3>ุณุจุฏ ุฎุฑุฏ</h3>
    <ul id="cart-items"></ul>
    <p>ุฌูุน ุฌุฒุฆ: <span id="subtotal">0</span> ุชููุงู</p>
    <p>ูุงูุงุช: <span id="tax">0</span> ุชููุงู</p>
    <p>ูุฒูู ุงุฑุณุงู: <span id="shipping">0</span> ุชููุงู</p>
    <p>ุฌูุน ฺฉู: <span id="total">0</span> ุชููุงู</p>

    <button type="submit">ุซุจุช ุณูุงุฑุด</button>
    <button type="button" id="cancelOrder">ูุบู ุณูุงุฑุด</button>
  </form>
</section>

<footer>
  <p>ยฉ 2025 ูุฑูุดฺฏุงู ูพุฑูุณุณ ุดุงูพ - ุชูุงู ุญููู ูุญููุธ ุงุณุช.</p>
</footer>

<script type="module">
import { cart, saveCart, updateCartCount, calculateTotal } from "./script.js";

const cartItemsList = document.getElementById("cart-items");
const subtotalEl = document.getElementById("subtotal");
const taxEl = document.getElementById("tax");
const shippingEl = document.getElementById("shipping");
const totalEl = document.getElementById("total");

function renderCart() {
  cartItemsList.innerHTML = "";
  cart.forEach(item => {
    const li = document.createElement("li");
    li.textContent = `${item.name} ร ${item.quantity} = ${(item.price * item.quantity).toLocaleString()} ุชููุงู`;
    cartItemsList.appendChild(li);
  });

  const { subtotal, tax, shipping, total } = calculateTotal();
  subtotalEl.textContent = subtotal.toLocaleString();
  taxEl.textContent = tax.toLocaleString();
  shippingEl.textContent = shipping.toLocaleString();
  totalEl.textContent = total.toLocaleString();

  updateCartCount();
}
renderCart();

document.getElementById("checkoutForm").addEventListener("submit", (e) => {
  e.preventDefault();
  alert("โ ุณูุงุฑุด ุซุจุช ุดุฏ!");
  cart.length = 0;
  saveCart();
  renderCart();
});

document.getElementById("cancelOrder").addEventListener("click", () => {
  cart.length = 0;
  saveCart();
  renderCart();
});
</script>
</body>
</html>
